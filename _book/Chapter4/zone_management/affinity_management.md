# 4.4.1.亲和组管理

亲和组是一种针对laaS资源的简单编排策略，可以用于保障用户业务的高性能或高可用。

用户可以定义亲和组，并为亲和组分配部分虚拟机。用户可通过亲和组实现在同一台主机上共同运行虚拟机，或在不同的主机上单独运行虚拟机。

在“资源管理”菜单下选择左侧“区域管理”的导航菜单，之后点击“亲和组”的子菜单，即可看到亲和组的管理界面：

![image-20210126120122756](affinity_management.assets/image-20210126120122756.png)

在亲和组管理界面，可以查看当前已有的全部亲和组信息，包括亲和组的名称、公司、部门、类型、说明和关联虚拟机。

## 相关操作

HYPERX云管理平台支持用户对亲和组进行管理，支持的功能如下：

- 快速搜索：根据亲和组的名称、部门、说明等字段全局快速搜索亲和组；
- 高级筛选：用户可以从表头右侧根据名称、公司、部门等字段筛选出符合条件的亲和组；
- 创建亲和组：创建一个新的亲和组；
- 编辑亲和组：将虚拟机绑定到亲和组中或从亲和组中解绑，保存后亲和组策略即时生效；
- 删除亲和组：删除选中的亲和组，组内虚拟机下次启动时不再遵循组策略 。

操作入口如下：

- 资源管理→区域管理→亲和组

## 操作说明

### 创建亲和组

① 在亲和组管理界面中，点击“创建亲和组”按钮：

![image-20201221180615910](affinity_management.assets/image-20201221180615910.png)

② 将会弹出“创建亲和组”的操作提示框，完善创建亲和组的对话框信息后，点击“创建”按钮，亲和组创建成功：

<img src="affinity_management.assets/image-20201221180918324.png" alt="image-20201221180918324" style="zoom:50%;" />

> [!NOTE]
>
> - 本平台目前只支持反亲和组（强制）策略。即将亲和组中的虚拟机分配到不同的主机中，当没有更多的主机可以分配时，分配失败。

### 编辑亲和组中的虚拟机

云平台支持将虚拟机绑定到亲和组中或从亲和组中解绑。

① 在亲和组管理界面中，选择需要编辑的亲和组，点击操作列的“编辑”按钮：

![image-20201221181559379](affinity_management.assets/image-20201221181559379.png)

② 将会弹出“编辑亲和组”的操作提示框，勾选需要绑定到亲和组中的虚拟机或取消需要从亲和组中解绑的虚拟机后，点击“提交”按钮，将更新亲和组中关联虚拟机的信息：

<img src="affinity_management.assets/image-20201222170020249.png" alt="image-20201222170020249" style="zoom:50%;" />

> [!WARNING]
>
> - 更新亲和组中关联虚拟机的信息后亲和组策略即时生效。

### 删除亲和组

① 在亲和组管理界面中，选择需要删除的亲和组，点击操作列的“删除”按钮：

![image-20201221182151759](affinity_management.assets/image-20201221182151759.png)

② 将会弹出“删除”的操作提示框，点击“确定”按钮后，将删除选中的亲和组：

<img src="affinity_management.assets/image-20210126145840909.png" alt="image-20210126145840909" style="zoom:50%;" />

> [!WARNING]
>
> - 删除选中的亲和组后，组内虚拟机下次启动时不再遵循亲和组策略 。